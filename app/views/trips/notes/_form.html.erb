<turbo-frame id="note-<%= trip.id %>-<%= note.date %>">
  <%= form_with(
    model: note,
    url: note.persisted? ? trip_note_path(trip, note) : trip_notes_path(trip),
    class: "space-y-3"
  ) do |form| %>
    <%= form.hidden_field :date, value: note.date %>

    <% if note.errors.any? %>
      <div class="alert alert-error text-sm">
        <%= note.errors.full_messages.join(', ') %>
      </div>
    <% end %>

    <div>
      <%= form.rich_text_area :body, class: "w-full min-h-[100px]" %>
    </div>

    <div class="flex gap-2">
      <%= form.submit note.persisted? ? "Update note" : "Save note",
          class: "btn btn-primary btn-sm" %>
      <button type="button"
              class="btn btn-ghost btn-sm"
              data-action="click->trip-maplibre#cancelDayNote"
              data-date="<%= note.date %>">
        Cancel
      </button>
    </div>
  <% end %>
</turbo-frame>
