<%= link_to trip, class: "block hover:shadow-lg rounded-lg" do %>
  <div class="card bg-base-200 shadow-xl hover:shadow-2xl transition-shadow duration-200" data-trip-id="<%= trip.id %>" id="trip-<%= trip.id %>">
    <div class="card-body">
      <h2 class="card-title justify-center">
        <span class="hover:underline"><%= trip.name %></span>
      </h2>
      <p class="text-sm text-gray-600 text-center">
        <%= "#{human_date(trip.started_at)} â€“ #{human_date(trip.ended_at)}, #{trip.distance_in_unit(current_user.safe_settings.distance_unit).round} #{current_user.safe_settings.distance_unit}" %>
      </p>

      <% if trip.path.present? %>
        <div style="width: 100%; aspect-ratio: 1/1;"
              id="map-<%= trip.id %>"
              class="rounded-lg z-0"
              data-controller="trip-maplibre-preview"
              data-trip-maplibre-preview-path-value="<%= trip.path.coordinates.to_json %>"
              data-trip-maplibre-preview-map-style-value="<%= current_user.safe_settings.settings['maps_maplibre_style'] || 'light' %>">
        </div>
      <% else %>
        <div style="width: 100%; aspect-ratio: 1/1;" class="flex items-center justify-center rounded-lg bg-base-300">
          <div class="text-center">
            <p class="text-base-content/60">Trip path is being calculated...</p>
            <div class="loading loading-spinner loading-md mt-2"></div>
          </div>
        </div>
      <% end %>
    </div>
  </div>
<% end %>
