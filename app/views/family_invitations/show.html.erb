<div class="min-h-screen bg-gradient-to-br from-blue-50 via-white to-purple-50 dark:from-gray-900 dark:via-gray-800 dark:to-gray-900 py-12 px-4 mx-auto">
  <div class="max-w-4xl mx-auto">
    <!-- Hero Section -->
    <div class="text-center mb-12">
      <div class="mx-auto flex items-center justify-center h-24 w-24 rounded-full bg-blue-500 mb-6 shadow-xl">
        <%= icon 'users', class: "h-12 w-12 text-white" %>
      </div>

      <h1 class="text-5xl font-bold text-gray-900 dark:text-white mb-4">
        Join <%= @invitation.family.name %>!
      </h1>

      <p class="text-xl text-gray-700 dark:text-gray-200 mb-2">
        You've been invited by <strong class="text-gray-900 dark:text-white"><%= @invitation.invited_by.email %></strong> to join their family. Create your account to accept the invitation and start sharing location data.
      </p>

      <div class="inline-flex items-center bg-blue-100 dark:bg-blue-900/40 border border-blue-300 dark:border-blue-600 rounded-full px-4 py-2 mt-4">
        <%= icon 'info', class: "h-5 w-5 text-blue-600 dark:text-blue-400 mr-2" %>
        <span class="text-sm font-medium text-blue-900 dark:text-blue-100">
          Your email (<%= @invitation.email %>) will be used for this account
        </span>
      </div>
    </div>

    <!-- Benefits Section -->
    <div class="bg-white dark:bg-gray-800 shadow-xl rounded-2xl p-8 mb-8">
      <h2 class="text-2xl font-bold text-gray-900 dark:text-white mb-6 text-center">
        What benefits does joining a family bring?
      </h2>

      <div class="grid md:grid-cols-2 gap-6 mb-8">
        <div class="flex items-start space-x-4 p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg border border-blue-100 dark:border-blue-700">
          <div class="flex-shrink-0">
            <div class="h-10 w-10 rounded-full bg-blue-600 dark:bg-blue-500 flex items-center justify-center">
              <%= icon 'map-pin', class: "h-6 w-6 text-white" %>
            </div>
          </div>
          <div>
            <h3 class="font-semibold text-gray-900 dark:text-white mb-1">
              Share Location Data
            </h3>
            <p class="text-sm text-gray-700 dark:text-gray-200">
              Share your location history with family members and see where they are
            </p>
          </div>
        </div>

        <div class="flex items-start space-x-4 p-4 bg-purple-50 dark:bg-purple-900/20 rounded-lg border border-purple-100 dark:border-purple-700">
          <div class="flex-shrink-0">
            <div class="h-10 w-10 rounded-full bg-purple-600 dark:bg-purple-500 flex items-center justify-center">
              <%= icon 'chart-column', class: "h-6 w-6 text-white" %>
            </div>
          </div>
          <div>
            <h3 class="font-semibold text-gray-900 dark:text-white mb-1">
              Track your location history
            </h3>
            <p class="text-sm text-gray-700 dark:text-gray-200">
              Access interactive maps and personal travel statistics
            </p>
          </div>
        </div>

        <div class="flex items-start space-x-4 p-4 bg-green-50 dark:bg-green-900/20 rounded-lg border border-green-100 dark:border-green-700">
          <div class="flex-shrink-0">
            <div class="h-10 w-10 rounded-full bg-green-600 dark:bg-green-500 flex items-center justify-center">
              <%= icon 'heart', class: "h-6 w-6 text-white" %>
            </div>
          </div>
          <div>
            <h3 class="font-semibold text-gray-900 dark:text-white mb-1">
              Stay Connected
            </h3>
            <p class="text-sm text-gray-700 dark:text-gray-200">
              Keep track of your loved ones' travels and adventures in real-time
            </p>
          </div>
        </div>

        <div class="flex items-start space-x-4 p-4 bg-yellow-50 dark:bg-yellow-900/20 rounded-lg border border-yellow-100 dark:border-yellow-700">
          <div class="flex-shrink-0">
            <div class="h-10 w-10 rounded-full bg-yellow-600 dark:bg-yellow-500 flex items-center justify-center">
              <%= icon 'shield-check', class: "h-6 w-6 text-white" %>
            </div>
          </div>
          <div>
            <h3 class="font-semibold text-gray-900 dark:text-white mb-1">
              Full Control & Privacy
            </h3>
            <p class="text-sm text-gray-700 dark:text-gray-200">
              You control what and how long you share and can leave the family anytime
            </p>
          </div>
        </div>
      </div>

      <!-- Invitation Details -->
      <div class="bg-gray-50 dark:bg-gray-700/50 rounded-lg p-6 mb-6 border border-gray-200 dark:border-gray-600">
        <h3 class="text-sm font-medium text-gray-600 dark:text-gray-300 mb-3">Invitation Details</h3>
        <div class="grid grid-cols-2 gap-4 text-sm">
          <div>
            <span class="text-gray-600 dark:text-gray-300">Family:</span>
            <span class="ml-2 font-semibold text-gray-900 dark:text-white"><%= @invitation.family.name %></span>
          </div>
          <div>
            <span class="text-gray-600 dark:text-gray-300">Invited by:</span>
            <span class="ml-2 font-semibold text-gray-900 dark:text-white"><%= @invitation.invited_by.email %></span>
          </div>
          <div>
            <span class="text-gray-600 dark:text-gray-300">Your email:</span>
            <span class="ml-2 font-semibold text-gray-900 dark:text-white"><%= @invitation.email %></span>
          </div>
          <div>
            <span class="text-gray-600 dark:text-gray-300">Expires:</span>
            <span class="ml-2 font-semibold text-gray-900 dark:text-white"><%= @invitation.expires_at.strftime('%b %d, %Y') %></span>
          </div>
        </div>
      </div>

      <!-- Action Buttons -->
      <div class="space-y-4">
        <% if user_signed_in? %>
          <!-- User is logged in, show accept button -->
          <%= link_to accept_family_invitation_path(@invitation.family, @invitation),
                method: :post,
                class: "block w-full bg-green-600 hover:bg-green-700 text-white px-8 py-4 rounded-lg font-semibold text-lg transition-all duration-200 shadow-lg hover:shadow-xl text-center" do %>
            ✓ Accept Invitation & Join Family
          <% end %>

          <p class="text-sm text-gray-600 dark:text-gray-300 text-center">
            Logged in as <%= current_user.email %>
            ·
            <%= link_to destroy_user_session_path, method: :delete, class: "text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-300" do %>
              Logout
            <% end %>
          </p>
        <% else %>
          <!-- User is not logged in, show register button prominently -->
          <%= link_to new_user_registration_path(invitation_token: @invitation.token),
                class: "block w-full bg-blue-600 hover:bg-blue-700 text-white px-8 py-4 rounded-lg font-semibold text-lg transition-all duration-200 shadow-lg hover:shadow-xl text-center" do %>
            Create Account & Join Family →
          <% end %>

          <div class="text-center">
            <p class="text-sm text-gray-600 dark:text-gray-300 mb-2">
              Already have an account?
            </p>
            <%= link_to new_user_session_path(invitation_token: @invitation.token),
                  class: "inline-block text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-300 font-medium" do %>
              Sign in to accept invitation
            <% end %>
          </div>
        <% end %>

        <!-- Decline Option -->
        <div class="pt-6 border-t border-gray-200 dark:border-gray-600 text-center">
          <p class="text-sm text-gray-600 dark:text-gray-300">
            Not interested? You can simply close this page.
          </p>
        </div>
      </div>
    </div>
  </div>
</div>
