<%
  moving = summary[:time_moving_minutes]
  stationary = summary[:time_stationary_minutes]
  total_minutes = moving + stationary
  moving_pct = total_minutes > 0 ? (moving.to_f / total_minutes * 100).round : 0
  stationary_pct = 100 - moving_pct
%>
<div class="space-y-2 py-1">
  <div class="timeline-summary-stats">
    <span class="badge badge-sm badge-ghost"><%= summary[:total_distance] %> <%= summary[:distance_unit] %></span>
    <span class="badge badge-sm badge-ghost"><%= summary[:places_visited] %> places</span>
    <span class="badge badge-sm badge-ghost"><%= format_duration_short(moving * 60) %> moving</span>
  </div>
  <% if total_minutes > 0 %>
    <div class="timeline-summary-bar" title="<%= moving_pct %>% moving Â· <%= stationary_pct %>% stationary">
      <div class="timeline-summary-bar-moving" style="width: <%= moving_pct %>%"></div>
      <div class="timeline-summary-bar-stationary" style="width: <%= stationary_pct %>%"></div>
    </div>
    <div class="flex justify-between text-[0.625rem] text-base-content/40 px-0.5">
      <span>moving</span>
      <span>stationary</span>
    </div>
  <% end %>
</div>
